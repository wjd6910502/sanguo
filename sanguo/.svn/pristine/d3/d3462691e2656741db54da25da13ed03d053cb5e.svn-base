function OnMessage_JieYiUpdateReply(player, role, arg, others)
	player:Log("OnMessage_JieYiUpdateReply, "..DumpTable(arg).." "..DumpTable(others))
	
	local jieyi_info = others.jieyi_info._data
	
	local resp = NewCommand("JieYiReply_Re")
	
	resp.id  =  arg.id
	resp.retcode = arg.agreement		
	resp.typ = arg.typ
	resp.role_id = arg.role_id
	role:SendToClient(SerializeCommand(resp))
		
end

function GetbrotherIds(jieyi_info,jieyityp,jieyiid)
	
	local brotherall = {} 	
	local fit = jieyi_info._jieyi_info:Find(jieyiid)			
	if fit ~= nil and jieyityp == 1 then
		local v = fit
		local bossId = v._boss_info._id:ToStr()
		if bossId == "0" then
				--主A不存在 操作错误
			throw()
			return	
		end
		brotherall[#brotherall+1] = bossId 

		local sit = v._brother_info:SeekToBegin()
		local s = sit:GetValue()
		while s ~= nil do
			local bro_id = s._id:ToStr()
			
			brotherall[#brotherall+1] = bro_id 
				
			sit:Next()
			s = sit:GetValue()
		end

	end
	
	local fit = jieyi_info._compare_jieyi_info:Find(jieyiid)
	if fit ~= nil and jieyityp == 2  then
		local v = fit
		local bossId = v._boss_info._id:ToStr()
		if bossId == "0" then
				--主A不存在 操作错误
			throw()
			return	
		end
		brotherall[#brotherall+1] = bossId 

		local sit = v._brother_info:SeekToBegin()
		local s = sit:GetValue()
		while s ~= nil do
			local bro_id = s._id:ToStr()
			
			brotherall[#brotherall+1] = bro_id 
				
			sit:Next()
			s = sit:GetValue()
		end	
	end

	return brotherall
end




